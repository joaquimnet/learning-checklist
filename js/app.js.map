{"version":3,"sources":["../src/index.ts","js/page-fetcher.js","js/app.js"],"names":["o","query","elements","document","querySelectorAll","length","make","html","div","createElement","innerHTML","children","Array","from","create","tag","options","css","element","styles","Object","keys","forEach","rule","NodeList","isArray","el","style","sanitize","str","temp","textContent","body","querySelector","window","defineProperty","value","fetchListing","res","fetch","content","json","fetchPage","url","text","contentHolder","pages","remToPixels","rem","parseFloat","getComputedStyle","documentElement","fontSize","linkClickedEvtHandler","event","preventDefault","pageName","target","attributes","href","then","console","log","sidebarGroupTemplate","category","topics","map","topic","path","join","pageListing","sidebarContent","addEventListener","e","scrollTo","top","behavior","scrollY","zIndex"],"mappings":"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","file":"app.js","sourceRoot":"..\\src","sourcesContent":["const o = (query: string): NodeListOf<Element> | Element | null => {\r\n  const elements = document.querySelectorAll(query);\r\n  if (!elements.length) {\r\n    return null;\r\n  } else if (elements.length === 1) {\r\n    return elements[0];\r\n  } else {\r\n    return elements;\r\n  }\r\n};\r\n\r\no.make = (html: string): null | HTMLCollection | Element | Element[] => {\r\n  const div = document.createElement('div');\r\n  div.innerHTML = html;\r\n  const elements = div.children;\r\n  if (!elements.length) {\r\n    return null;\r\n  } else if (elements.length === 1) {\r\n    return elements[0];\r\n  } else {\r\n    return Array.from(elements);\r\n  }\r\n};\r\n\r\no.create = (tag: keyof HTMLElementTagNameMap, options: ElementCreationOptions) =>\r\n  document.createElement(tag, options);\r\n\r\no.css = (element: HTMLElement | NodeListOf<HTMLElement>, styles: CSSStyleDeclaration) => {\r\n  if (typeof styles === 'object' && !!element) {\r\n    Object.keys(styles).forEach(rule => {\r\n      if ((element instanceof NodeList && element.length) || Array.isArray(element)) {\r\n        element.forEach((el: any) => o.css(el, styles));\r\n      } else {\r\n        ((element as HTMLElement).style[rule as keyof CSSStyleDeclaration] as any) = styles[\r\n          rule as keyof CSSStyleDeclaration\r\n        ] as any;\r\n      }\r\n    });\r\n  }\r\n  return element;\r\n};\r\n\r\no.sanitize = (str: string) => {\r\n  const temp = document.createElement('div');\r\n  temp.textContent = str;\r\n  return temp.innerHTML;\r\n};\r\n\r\no.body = document.querySelector('body');\r\n\r\nif (window) {\r\n  Object.defineProperty(window, 'o', { value: o });\r\n}\r\n\r\nexport default o;\r\n","export async function fetchListing() {\r\n  const res = await fetch(`./pages.txt`);\r\n  const content = await res.json();\r\n  return content;\r\n}\r\n\r\nexport async function fetchPage(url) {\r\n  const res = await fetch(url);\r\n  const content = await res.text();\r\n  return content;\r\n}\r\n","import o from 'domil';\r\nimport { fetchPage, fetchListing } from './page-fetcher';\r\n\r\nconst contentHolder = o('.content');\r\n\r\n// console.log(contentEl);\r\n\r\n// const path = location.pathname.substr(1).split('/');\r\n\r\n// console.log(location.pathname.split('/'));\r\n// console.log(path);\r\n\r\nconst pages = {};\r\n\r\nfunction remToPixels(rem) {    \r\n  return rem * parseFloat(getComputedStyle(document.documentElement).fontSize);\r\n}\r\n\r\nconst linkClickedEvtHandler = event => {\r\n  event.preventDefault();\r\n\r\n  const pageName = event.target.attributes.href.value;\r\n  if (!pageName) return;\r\n\r\n  if (pages[pageName]) {\r\n    contentHolder.innerHTML = pages[pageName];\r\n    return;\r\n  }\r\n\r\n  fetchPage(pageName).then(res => {\r\n    console.log(`Fetching ${pageName}...`);\r\n    pages[pageName] = res;\r\n    contentHolder.innerHTML = res;\r\n  });\r\n};\r\n\r\nconst sidebarGroupTemplate = (category, topics) => {\r\n  return `<div class=\"sidebar-group\">\r\n<span class=\"sidebar-header\">\r\n  ${category}\r\n</span>\r\n<ul>\r\n  ${topics\r\n    .map(topic => {\r\n      return `<li><a href=\"${topic.path}\">${topic.pageName}</a></li>`;\r\n    })\r\n    .join('\\n')}\r\n</ul>\r\n</div>`;\r\n};\r\n\r\nfetchListing().then(pageListing => {\r\n  const sidebarContent = Object.keys(pageListing)\r\n    .map(category => {\r\n      return sidebarGroupTemplate(category, pageListing[category]);\r\n    })\r\n    .join('\\n');\r\n  o('.sidebar').innerHTML = sidebarContent;\r\n  o('a').forEach(el => el.addEventListener('click', linkClickedEvtHandler));\r\n});\r\n\r\no('.fixed-overside').addEventListener('click', e => {\r\n  window.scrollTo({ top: 0, behavior: 'smooth' });\r\n});\r\n\r\ndocument.addEventListener('scroll', e => {\r\n  if (window.scrollY >= remToPixels(4)) {\r\n    // is visible\r\n    o.css(o('.fixed-overside'), { zIndex: 1000000000000000 });\r\n  } else {\r\n    // is not visible\r\n    o.css(o('.fixed-overside'), { zIndex: -1 });\r\n  }\r\n});\r\n"]}